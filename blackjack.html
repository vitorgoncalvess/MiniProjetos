<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BlackJack</title>
</head>
<body style="font-size: 30px; font-family: Arial;">
    <button class="botao" id="botao" onclick="startGame()">Iniciar Jogo</button>
    <button style="display: none; margin-top: 25.5%; margin-left: 0% ; position: fixed;" class="botao" id="pedirB" onclick="pegarCarta()">Pedir Carta</button>
    <button id="pararB" onclick="parar()" class="botao" style="display: none;width: 80px; margin-top: 25.5%; margin-left: 13% ; position: fixed;">Parar</button>
    <button onclick="restart()" class="botao" id="reiniciarJogo" style="position: fixed; margin-top: 19%; display: none;">Reiniciar Jogo</button>
    <div id="percent" class="jogador" style="margin-top: 363px;margin-left: -140px; font-size: 20px; display: none; position: fixed;"></div>
    <div class="oponente" id="oponente"></div>
    <div class="oponente" id="oponenteR"></div>
    <div id="totalOponente"></div>
    <div class="jogador" id="jogador"></div>
    <div style="position: fixed; justify-content: center; text-align: center;" id="totalJogador"></div>
</body>
</html>
<script>
    totalJ = 0
    totalO = 0
    cartaA = 0
    cartaAO = 0
    limite = 21
    porcent = 0
    function totalJoga() {
        totalJogador.innerHTML = `${totalJ}`
    }
    function totalOp() {
        totalOponente.innerHTML = `${totalO}`
    }
    function startGame() {
       botao.style.display = 'none'
       pedirB.style.display = 'block'
       pararB.style.display = 'block'
       percent.style.display = 'block'
       pegarCarta()
       pegarOponente()
    }
    function pegarCarta() {
            cartaJ = Math.floor(Math.random() * (13 - 1)) + 1;
        if (cartaJ == 1) {
            cartaA = 1
            totalJ += 1
            totalJoga()
            jogador.innerHTML += `<img style="height: 200px;" src="http://livresaber.sead.ufscar.br:8080/jspui/bitstream/123456789/1194/7/As%20de%20paus.png">`
        } else if (cartaJ == 2) {
            totalJ += 2
            totalJoga()
            jogador.innerHTML += `<img style="height: 200px;" src="http://livresaber.sead.ufscar.br:8080/jspui/bitstream/123456789/1198/7/2%20de%20paus.png">`
        } else if (cartaJ == 3) {
            totalJ += 3
            totalJoga()
            jogador.innerHTML += `<img style="height: 200px;" src="http://livresaber.sead.ufscar.br:8080/jspui/bitstream/123456789/1202/7/3%20de%20paus.png">`
        } else if (cartaJ == 4) {
            totalJ += 4
            totalJoga()
            jogador.innerHTML += `<img style="height: 200px;" src="http://livresaber.sead.ufscar.br:8080/jspui/bitstream/123456789/1206/7/4%20de%20paus.png">`
        } else if (cartaJ == 5) {
            totalJ += 5
            totalJoga()
            jogador.innerHTML += `<img style="height: 200px;" src="http://livresaber.sead.ufscar.br:8080/jspui/bitstream/123456789/1210/7/5%20de%20paus.png">`
        } else if (cartaJ == 6) {
            totalJ += 6
            totalJoga()
            jogador.innerHTML += `<img style="height: 200px;" src="http://livresaber.sead.ufscar.br:8080/jspui/bitstream/123456789/1214/7/6%20de%20paus.png">`
        } else if (cartaJ == 7) {
            totalJ += 7
            totalJoga()
            jogador.innerHTML += `<img style="height: 200px;" src="http://livresaber.sead.ufscar.br:8080/jspui/bitstream/123456789/1218/8/7%20de%20paus.png">`
        } else if (cartaJ == 8) {
            totalJ += 8
            totalJoga()
            jogador.innerHTML += `<img style="height: 200px;" src="http://livresaber.sead.ufscar.br:8080/jspui/bitstream/123456789/1222/7/8%20de%20paus.png">`
        } else if (cartaJ == 9) {
            totalJ += 9
            totalJoga()
            jogador.innerHTML += `<img style="height: 200px;" src="http://livresaber.sead.ufscar.br:8080/jspui/bitstream/123456789/1226/7/9%20de%20paus.png">`
        } else if (cartaJ == 10) {
            totalJ += 10
            totalJoga()
            jogador.innerHTML += `<img style="height: 200px;" src="http://livresaber.sead.ufscar.br:8080/jspui/bitstream/123456789/1230/7/10%20de%20paus.png">`
        } else if (cartaJ == 11) {
            totalJ += 10
            totalJoga()
            jogador.innerHTML += `<img style="height: 200px;" src="http://livresaber.sead.ufscar.br:8080/jspui/bitstream/123456789/1235/7/dama%20de%20paus.png">`
        } else if (cartaJ == 12) {
            totalJ += 10
            totalJoga()
            jogador.innerHTML += `<img style="height: 200px;" src="http://livresaber.sead.ufscar.br:8080/jspui/bitstream/123456789/1239/7/valete%20de%20paus.png">`
        } else if (cartaJ == 13) {
            totalJ += 10
            totalJoga()
            jogador.innerHTML += `<img style="height: 200px;" src="http://livresaber.sead.ufscar.br:8080/jspui/bitstream/123456789/1231/7/rei%20de%20paus.png">`
        }
        if (totalJ <= 11 && cartaA == 1) {
            totalJogador.innerHTML = `${totalJ} ou ${totalJ + 9}`
            cartaAF = 1
        } else {
            totalJogador.innerHTML = `${totalJ}`
            cartaAF = 0
        }
        if (totalJ > limite) {
            pedirB.style.display = 'none'
            pararB.style.display = 'none'
            percent.style.display = 'none'
            totalJogador.innerHTML += `<br>ESTOUROU!`
            reiniciarJogo.style.display = 'block'
        }
        if (totalJ == limite) {
            pedirB.style.display = 'none'
            pararB.style.display = 'none'
            percent.style.display = 'none'
            resultado()
            setTimeout(oponenteRR, 500)
        }
        falta = 21 - totalJ
        porcent = falta * 100 / 10
        if (porcent > 100) { 
            percent.innerHTML = `${100}%`
        } else {
            percent.innerHTML = `<span style="color: rgb(${totalJ * 15}, 0, 0);">${porcent.toFixed(0)}%</span>`
        }
    }
    function pegarOponente() {
         cartaO = Math.floor(Math.random() * (13 - 1)) + 1;
        if (cartaO == 1) {
            cartaAO = 1
            totalO += 1
            totalOp()
            oponente.innerHTML += `<img style="height: 200px;" src="http://livresaber.sead.ufscar.br:8080/jspui/bitstream/123456789/1194/7/As%20de%20paus.png">`
        } else if (cartaO == 2) {
            totalO += 2
            totalOp()
            oponente.innerHTML += `<img style="height: 200px;" src="http://livresaber.sead.ufscar.br:8080/jspui/bitstream/123456789/1198/7/2%20de%20paus.png">`
        } else if (cartaO == 3) {
            totalO += 3
            totalOp()
            oponente.innerHTML += `<img style="height: 200px;" src="http://livresaber.sead.ufscar.br:8080/jspui/bitstream/123456789/1202/7/3%20de%20paus.png">`
        } else if (cartaO == 4) {
            totalO += 4
            totalOp()
            oponente.innerHTML += `<img style="height: 200px;" src="http://livresaber.sead.ufscar.br:8080/jspui/bitstream/123456789/1206/7/4%20de%20paus.png">`
        } else if (cartaO == 5) {
            totalO += 5
            totalOp()
            oponente.innerHTML += `<img style="height: 200px;" src="http://livresaber.sead.ufscar.br:8080/jspui/bitstream/123456789/1210/7/5%20de%20paus.png">`
        } else if (cartaO == 6) {
            totalO += 6
            totalOp()
            oponente.innerHTML += `<img style="height: 200px;" src="http://livresaber.sead.ufscar.br:8080/jspui/bitstream/123456789/1214/7/6%20de%20paus.png">`
        } else if (cartaO == 7) {
            totalO += 7
            totalOp()
            oponente.innerHTML += `<img style="height: 200px;" src="http://livresaber.sead.ufscar.br:8080/jspui/bitstream/123456789/1218/8/7%20de%20paus.png">`
        } else if (cartaO == 8) {
            totalO += 8
            totalOp()
            oponente.innerHTML += `<img style="height: 200px;" src="http://livresaber.sead.ufscar.br:8080/jspui/bitstream/123456789/1222/7/8%20de%20paus.png">`
        } else if (cartaO == 9) {
            totalO += 9
            totalOp()
            oponente.innerHTML += `<img style="height: 200px;" src="http://livresaber.sead.ufscar.br:8080/jspui/bitstream/123456789/1226/7/9%20de%20paus.png">`
        } else if (cartaO == 10) {
            totalO += 10
            totalOp()
            oponente.innerHTML += `<img style="height: 200px;" src="http://livresaber.sead.ufscar.br:8080/jspui/bitstream/123456789/1230/7/10%20de%20paus.png">`
        } else if (cartaO == 11) {
            totalO += 10
            totalOp()
            oponente.innerHTML += `<img style="height: 200px;" src="http://livresaber.sead.ufscar.br:8080/jspui/bitstream/123456789/1235/7/dama%20de%20paus.png">`
        } else if (cartaO == 12) {
            totalO += 10
            totalOp()
            oponente.innerHTML += `<img style="height: 200px;" src="http://livresaber.sead.ufscar.br:8080/jspui/bitstream/123456789/1239/7/valete%20de%20paus.png">`
        } else if (cartaO == 13) {
            totalO += 10
            totalOp()
            oponente.innerHTML += `<img style="height: 200px;" src="http://livresaber.sead.ufscar.br:8080/jspui/bitstream/123456789/1231/7/rei%20de%20paus.png">`
        }
        oponenteR.innerHTML = `<img style="height: 200px;" src="https://worldxm.net/worldxm.net/wp-content/uploads/2018/10/blue-copag-back-310-web.png">`
        if (totalO <+ 11 && cartaAO == 1) {
            totalOponente.innerHTML = `${totalO} ou ${totalO + 9}`
            cartaAOF = 1
        } else {
            totalOponente.innerHTML = `${totalO}`
            cartaAOF = 0
        }
    }
    function parar() {
        if (cartaAF == 1) {
            totalJ += 9
        } else if (cartaAOF == 1) {
            totalO += 9
        }
        pedirB.style.display = 'none'
        pararB.style.display = 'none'
        percent.style.display = 'none'
        totalOponente.innerHTML = `${totalO}`
        totalJogador.innerHTML = `${totalJ}`
        setTimeout(oponenteRR, 500)
        resultado()
    }
    function oponenteRR() {
        oponenteR.innerHTML = ''
    }
    function resultado() {
        if(totalO <= totalJ) {
            setTimeout(pegarOponenteFinal, 500)
        } else if (totalO > totalJ) {
            totalJogador.innerHTML += `<br>PERDEU!`
            reiniciarJogo.style.display = 'block'
        }
    }
    function pegarOponenteFinal() {
        cartaO = Math.floor(Math.random() * (13 - 1)) + 1;
        if (cartaO == 1) {
            totalO += 1
            cartaAO = 1
            totalOp()
            oponente.innerHTML += `<img style="height: 200px;" src="http://livresaber.sead.ufscar.br:8080/jspui/bitstream/123456789/1194/7/As%20de%20paus.png">`
        } else if (cartaO == 2) {
            totalO += 2
            totalOp()
            oponente.innerHTML += `<img style="height: 200px;" src="http://livresaber.sead.ufscar.br:8080/jspui/bitstream/123456789/1198/7/2%20de%20paus.png">`
        } else if (cartaO == 3) {
            totalO += 3
            totalOp()
            oponente.innerHTML += `<img style="height: 200px;" src="http://livresaber.sead.ufscar.br:8080/jspui/bitstream/123456789/1202/7/3%20de%20paus.png">`
        } else if (cartaO == 4) {
            totalO += 4
            totalOp()
            oponente.innerHTML += `<img style="height: 200px;" src="http://livresaber.sead.ufscar.br:8080/jspui/bitstream/123456789/1206/7/4%20de%20paus.png">`
        } else if (cartaO == 5) {
            totalO += 5
            totalOp()
            oponente.innerHTML += `<img style="height: 200px;" src="http://livresaber.sead.ufscar.br:8080/jspui/bitstream/123456789/1210/7/5%20de%20paus.png">`
        } else if (cartaO == 6) {
            totalO += 6
            totalOp()
            oponente.innerHTML += `<img style="height: 200px;" src="http://livresaber.sead.ufscar.br:8080/jspui/bitstream/123456789/1214/7/6%20de%20paus.png">`
        } else if (cartaO == 7) {
            totalO += 7
            totalOp()
            oponente.innerHTML += `<img style="height: 200px;" src="http://livresaber.sead.ufscar.br:8080/jspui/bitstream/123456789/1218/8/7%20de%20paus.png">`
        } else if (cartaO == 8) {
            totalO += 8
            totalOp()
            oponente.innerHTML += `<img style="height: 200px;" src="http://livresaber.sead.ufscar.br:8080/jspui/bitstream/123456789/1222/7/8%20de%20paus.png">`
        } else if (cartaO == 9) {
            totalO += 9
            totalOp()
            oponente.innerHTML += `<img style="height: 200px;" src="http://livresaber.sead.ufscar.br:8080/jspui/bitstream/123456789/1226/7/9%20de%20paus.png">`
        } else if (cartaO == 10) {
            totalO += 10
            totalOp()
            oponente.innerHTML += `<img style="height: 200px;" src="http://livresaber.sead.ufscar.br:8080/jspui/bitstream/123456789/1230/7/10%20de%20paus.png">`
        } else if (cartaO == 11) {
            totalO += 10
            totalOp()
            oponente.innerHTML += `<img style="height: 200px;" src="http://livresaber.sead.ufscar.br:8080/jspui/bitstream/123456789/1235/7/dama%20de%20paus.png">`
        } else if (cartaO == 12) {
            totalO += 10
            totalOp()
            oponente.innerHTML += `<img style="height: 200px;" src="http://livresaber.sead.ufscar.br:8080/jspui/bitstream/123456789/1239/7/valete%20de%20paus.png">`
        } else if (cartaO == 13) {
            totalO += 10
            totalOp()
            oponente.innerHTML += `<img style="height: 200px;" src="http://livresaber.sead.ufscar.br:8080/jspui/bitstream/123456789/1231/7/rei%20de%20paus.png">`
        }
        if (totalO <= 11 && cartaAO == 1) {
            totalOponente.innerHTML = `${totalO} ou ${totalO + 9}`
            cartaAOF = 1
        } else {
            totalOponente.innerHTML = `${totalO}`
            cartaAOF = 0
        }
        if (totalO == totalJ && totalO == limite) {
            totalJogador.innerHTML = `EMPATE!`
            reiniciarJogo.style.display = 'block'
        } else if (totalO > limite){
            totalJogador.innerHTML += `<br>GANHOU!`
            reiniciarJogo.style.display = 'block'
        } else {
            resultado()
        }
    }
    function restart() {
        totalJ = 0
        totalO = 0
        cartaA = 0
        cartaAO = 0
        cartaAF = 0
        cartaAOF = 0
        pedirB.style.display = 'block'
        pararB.style.display = 'block'
        percent.style.display = 'block'
        reiniciarJogo.style.display = 'none'
        jogador.innerHTML = ''
        oponente.innerHTML = ''
        pegarCarta()
        pegarOponente()
    }
</script>
<style>
    body {
        display: flex;
        justify-content: center;
        user-select: none;
    }
    .botao {
        height: 50px;
    }
    .jogador {
        margin-top: 30%;
    }
    #totalOponente {
        position: fixed;
        margin-top: 15%;
    }
    #totalJogador {
        position: fixed;
        margin-top: 23%;
    }
    .oponente {
        position: fixed;
        margin-left: 0%;
    }
    #oponenteR {
        margin-left: 23%;
    }
</style>